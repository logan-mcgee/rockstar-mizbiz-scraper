"use strict";
(self.webpackChunk_rockstargames_modules_core_engagement = self.webpackChunk_rockstargames_modules_core_engagement || []).push([
  [877], {
    494: (e, t, a) => {
      a.r(t), a.d(t, {
        default: () => S
      });
      var n = a(932),
        r = a(88),
        s = a(215),
        c = a(298),
        i = a(788),
        o = a(929),
        l = a(859),
        d = a(711),
        g = a(976),
        m = a(384),
        b = a(201),
        f = a(974),
        _ = a(817);
      a(657);
      const u = (0, m.vU)({
          engagement_title: {
            id: "engagement_title",
            defaultMessage: "Get an Extra GTA$300,000"
          },
          engagement_description: {
            id: "engagement_description",
            defaultMessage: "Now until October 9, GTA+ Members can claim a one-time GTA$300,000 bonus on top of their regular GTA+ benefits. Click “Claim Now” and sign in to the Rockstar Games account linked to your GTA+ Membership."
          },
          engagement_badge_text: {
            id: "engagement_badge_text",
            defaultMessage: "Exclusive Offer"
          },
          engagement_legal_text: {
            id: "engagement_legal_text",
            defaultMessage: "Offer ends October 9 at 11:59 p.m. ET. Offer must be applied to the GTA Online Game Account linked to your GTA+ Membership and is limited to one redemption per GTA+ Membership. Must claim and then sign in to GTA Online using your GTA+ Game Account before November 8 at 11:59 p.m. ET to redeem offer. Additional terms apply, see {FaqLink} for full terms."
          },
          engagement_faq: {
            id: "engagement_faq",
            defaultMessage: "FAQ"
          },
          engagement_faqs: {
            id: "engagement_faqs",
            defaultMessage: "FAQs"
          },
          engagement_claim: {
            id: "engagement_claim",
            defaultMessage: "Claim Now"
          },
          engagement_login: {
            id: "engagement_login",
            defaultMessage: "Sign In and Claim Now"
          },
          engagement_error_alert_title: {
            id: "engagement_error_alert",
            defaultMessage: "No Qualifying Character Found"
          },
          engagement_error_alert_body: {
            id: "engagement_error_alert_body",
            defaultMessage: "To claim and redeem this offer, you must link your Rockstar Games account to at least one character for GTA Online on Xbox Series X|S or PlayStation 5 with an active GTA+ Membership. For more information on how to claim and redeem this offer, read our {FaqLink}."
          },
          engagement_success_alert_title: {
            id: "engagement_success_alert_title",
            defaultMessage: "Almost There!"
          },
          engagement_success_alert_body: {
            id: "engagement_success_alert_body",
            defaultMessage: "To redeem this offer, sign in to GTA Online with the game account linked to your active GTA+ Membership before November 8 at 11:59 p.m. ET and the GTA$300,000 will show in that character’s Maze Bank account within 72 hours."
          },
          engagement_error_alert_failure: {
            id: "engagement_error_alert_failure",
            defaultMessage: "Something went wrong on our end. Please try again in a few minutes."
          },
          engagement_link_account: {
            id: "engagement_link_account",
            defaultMessage: "Link Another Account"
          },
          engagement_link_console_account: {
            id: "engagement_link_console_account",
            defaultMessage: "Link Game Account"
          },
          engagement_cta_ok: {
            id: "engagement_cta_ok",
            defaultMessage: "Ok"
          }
        }),
        h = {
          interestTracker: "_3d5c6a1b2bf5bdb1b455bc9c94e87f825544",
          loader: "_3d5c6a1b2bf5bdb1be6a9d3f30f7c81d4cbe",
          moduleImage: "_3d5c6a1b2bf5bdb1eb8fe33cd6aece8d0f7c",
          mobileImgContainer: "_3d5c6a1b2bf5bdb1d8ca03e67f93cd373fb9",
          moduleImageMobile: "_3d5c6a1b2bf5bdb1ca3c831b83c0ceea4f7a",
          slideContainer: "_3d5c6a1b2bf5bdb1fb948f2d095cdabfc0a9",
          contentContainer: "_3d5c6a1b2bf5bdb1d2d8fe92bcf881712908",
          landingSlide: "_3d5c6a1b2bf5bdb1dc00b7e2ea24d42e6f63",
          errorSlide: "_3d5c6a1b2bf5bdb1e91c1a4f2316f9b7c35a",
          successSlide: "_3d5c6a1b2bf5bdb1b4ed8a1047fff0bedff5",
          unlinkedSlide: "_3d5c6a1b2bf5bdb1a451fb368fc9006577c5",
          textContent: "_3d5c6a1b2bf5bdb1bb96086a0d2b908c9bf2",
          platformButtonContainer: "_3d5c6a1b2bf5bdb1bdb1b83b433a4155e6e5",
          bottomContent: "_3d5c6a1b2bf5bdb1ab035d5edff97f3b4b74",
          legal: "_3d5c6a1b2bf5bdb1f8971c6d80b2820cc9ed",
          faq: "_3d5c6a1b2bf5bdb1ef9ec77279564ee712de",
          faqLink: "_3d5c6a1b2bf5bdb1af6cfa7bdfbeb6ffb312",
          badge: "_3d5c6a1b2bf5bdb1d49a4d51395807ee2ff1",
          hidden: "_3d5c6a1b2bf5bdb1d75c3c71ac3826175b8e",
          visible: "_3d5c6a1b2bf5bdb1a617c16b4455fd5cf6a7",
          onScreen: "_3d5c6a1b2bf5bdb1dfad4fc5d6f094df9268",
          offScreen: "_3d5c6a1b2bf5bdb1c6a0ea08015039d781a2",
          alert: "_3d5c6a1b2bf5bdb1b46b46dc0fc6c041c1cf",
          alertText: "_3d5c6a1b2bf5bdb1d1118b11958b9a043c89",
          errorAlert: "_3d5c6a1b2bf5bdb1c1a82741e740d7fee218",
          successAlert: "_3d5c6a1b2bf5bdb1d6b8c77ea94ff7c8f2d9",
          linkMore: "_3d5c6a1b2bf5bdb1f6cd6da17f8e1351abaa",
          withIcon: "_3d5c6a1b2bf5bdb1da9aeec80fe1108047d7",
          btnText: "_3d5c6a1b2bf5bdb1e410fb0e29176ec2681b",
          swiperContainer: "_3d5c6a1b2bf5bdb1fa91ba7c2427a8081114"
        },
        {
          host: x,
          login: p,
          authHost: k,
          clientId: v
        } = (0, o.getScConfigForOrigin)(),
        j = () => (0, _.jsx)(b.Z, {
          ...u.engagement_legal_text,
          values: {
            FaqLink: (0, _.jsx)(g.A, {
              className: h.faq,
              to: "https://support.rockstargames.com/articles/20625787714323",
              target: "_self",
              children: (0, _.jsx)(b.Z, {
                ...u.engagement_faq
              })
            })
          }
        }),
        S = e => {
          let {
            giftId: t = 1,
            location: a = "gtaplus_site"
          } = e;
          const [m] = (0, r.useSearchParams)(), {
            data: S,
            loggedIn: y
          } = (0, d.useRockstarUser)(), T = (0, l.useRockstarTokenPing)(), w = `https://${x}.rockstargames.com/settings/linkedaccounts`, N = (0, o.useLocale)(), M = (0, o.toScLocaleString)(N), C = (0, f.Z)(), {
            track: A
          } = (0, d.useGtmTrack)(), {
            ref: G,
            inView: E
          } = (0, i.YD)({
            threshold: .6
          }), I = (0, n.createRef)(), $ = (0, n.createRef)(), [q, L] = (0, n.useState)(), [O, Z] = (0, n.useState)([]), [F, R] = (0, n.useState)(window.innerWidth), [P, B] = (0, n.useState)(), [U, z] = (0, n.useState)("hidden"), [H, Q] = (0, n.useState)("hidden"), [V, W] = (0, n.useState)("hidden"), [D, X] = (0, n.useState)("hidden"), [Y, J] = (0, n.useState)(!1), K = (0, l.useRockstarToken)(), ee = e => {
            const t = (0, n.useRef)();
            return (0, n.useEffect)((() => {
              t.current = e
            })), t.current
          }, te = ee(P), ae = ee(y);
          (0, n.useEffect)((() => (window.addEventListener("resize", (() => R(window.innerWidth))), () => {
            window.removeEventListener("resize", (() => R(window.innerWidth)))
          })), []), (0, n.useEffect)((() => {
            $.current && I.current && (F < 1280 ? q ? $.current.style.height = "auto" : "visible" !== V && "visible" !== U || ($.current.style.height = I.current.clientHeight > 0 && `${I.current.clientHeight}px`) : $.current.style.height = "auto")
          }), [F, q, U, V]), (0, n.useEffect)((() => {
            const e = S?.characters?.gtao.filter((e => "ps5" === e.platform || "xboxsx" === e.platform));
            Z(e || [])
          }), [S]), (0, n.useEffect)((() => {
            "boolean" != typeof te && "boolean" != typeof ae || P && y && (async () => {
              const {
                result: e
              } = await (0, o.coreScApiFetch)("marketing/engagement/claim/exists", {
                pingBearer: T,
                query: {
                  giftId: t
                }
              });
              L(e), B(!1)
            })()
          }), [P, y]), (0, n.useEffect)((() => {
            "boolean" == typeof y ? y ? B(!0) : (B(!1), Q("onScreen")) : B(!0)
          }), [y]), (0, n.useEffect)((() => {
            q ? (Q("hidden"), z("onScreen")) : "boolean" != typeof q || q || Q("onScreen")
          }), [q]), (0, n.useEffect)((() => {
            E && !Y && (A({
              event: "page_section_impression",
              event_action: "impression",
              event_category: "page_section",
              event_label: "interest tracker",
              element_placement: "interest tracker"
            }), J(!0))
          }), [E]), (0, n.useEffect)((() => {
            "onScreen" === U && A({
              event: "alert_update",
              event_action: "update",
              event_category: "alert",
              event_label: "successful claim",
              element_placement: "interest tracker",
              text: C.formatMessage(u.engagement_success_alert_title),
              o_id: t
            })
          }), [U]), (0, n.useEffect)((() => {
            "onScreen" === V && A({
              event: "alert_error",
              event_action: "error",
              event_category: "alert",
              event_label: "no linked accounts",
              element_placement: "interest tracker",
              text: C.formatMessage(u.engagement_error_alert_title),
              o_id: t
            })
          }), [V]), (0, n.useEffect)((() => {
            "onScreen" === D && A({
              event: "alert_error",
              event_action: "error",
              event_category: "alert",
              event_label: "something went wrong",
              element_placement: "interest tracker",
              text: C.formatMessage(u.engagement_error_alert_failure),
              o_id: t
            })
          }), [D]);
          const ne = e => {
              const t = `${document.location.pathname}${document.location.search}`;
              return `https://${k}.rockstargames.com/tpa/${e}/link/?cid=${v}&lang=${M}&returnUrl=${encodeURIComponent(t)}&accessToken=${K}`
            },
            re = [{
              key: "ps5",
              platform: "ps5",
              href: ne("np"),
              translated: !0
            }, {
              key: "xboxseriesxs",
              platform: "xboxseriesxs",
              href: ne("xbox"),
              translated: !0
            }];
          return (0, _.jsx)("div", {
            children: (0, _.jsxs)(c.E.div, {
              className: [h.interestTracker, P && h.loader].join(" "),
              initial: {
                opacity: 0
              },
              whileInView: {
                opacity: 1
              },
              viewport: {
                margin: "-20%",
                once: !0
              },
              transition: {
                ease: "easeIn",
                duration: .4
              },
              "data-context": "interestTracker",
              ref: G,
              children: [(0, _.jsx)("div", {
                className: h.moduleImage
              }), (0, _.jsx)("div", {
                className: [h.slideContainer, P ? h.loader : ""].join(" "),
                ref: $,
                children: P ? (0, _.jsx)(g.LoadingAnimation, {
                  type: "SPINNING"
                }) : (0, _.jsxs)(_.Fragment, {
                  children: [(0, _.jsxs)("div", {
                    className: [h.contentContainer, h[H], h.landingSlide].join(" "),
                    ref: I,
                    children: [(0, _.jsx)("img", {
                      src: "https://media-rockstargames-com.akamaized.net/mfe5/__common/img/75d644cad230b17cbcbc.jpg",
                      className: h.moduleImageMobile,
                      alt: "placeholder"
                    }), (0, _.jsx)("div", {
                      className: h.textContent,
                      children: (0, _.jsxs)("div", {
                        className: h.alert,
                        children: [(0, _.jsx)("div", {
                          className: h.badge,
                          children: (0, _.jsx)(b.Z, {
                            ...u.engagement_badge_text
                          })
                        }), (0, _.jsxs)("div", {
                          className: h.alertText,
                          children: [(0, _.jsx)("h2", {
                            children: (0, _.jsx)(b.Z, {
                              ...u.engagement_title
                            })
                          }), (0, _.jsx)("p", {
                            children: (0, _.jsx)(b.Z, {
                              ...u.engagement_description
                            })
                          })]
                        })]
                      })
                    }), (0, _.jsxs)("div", {
                      className: h.bottomContent,
                      children: [(0, _.jsx)(g.Gen9Button, {
                        text: y ? C.formatMessage(u.engagement_claim) : C.formatMessage(u.engagement_login),
                        onClick: y ? async () => {
                          I.current && $.current && F < 1280 ? $.current.style.height = `${I.current.clientHeight}px` : $.current.style.height = "auto", A({
                            event: "cta_claim",
                            event_action: "claim",
                            event_category: "cta",
                            event_label: "claim",
                            element_placement: "interest tracker",
                            text: C.formatMessage(u.engagement_claim),
                            o_id: t
                          });
                          const e = {
                            giftId: t,
                            location: a,
                            utmSource: m.get("utm_source"),
                            utmMedium: m.get("utm_medium"),
                            utmCampaign: m.get("utm_campaign"),
                            utmContent: m.get("utm_content")
                          };
                          if (O.length > 0) {
                            const {
                              status: t
                            } = await (0, o.coreScApiFetch)("marketing/engagement/claim/create", {
                              fetchOptions: {
                                method: "POST"
                              },
                              pingBearer: T,
                              query: e
                            }) ?? [];
                            t ? (Q("offScreen"), z("visible"), setTimeout((() => {
                              Q("hidden")
                            }), 300), setTimeout((() => {
                              z("onScreen")
                            }), 100)) : (Q("offScreen"), X("visible"), setTimeout((() => {
                              Q("hidden")
                            }), 300), setTimeout((() => {
                              X("onScreen")
                            }), 100))
                          } else Q("offScreen"), W("visible"), setTimeout((() => {
                            Q("hidden")
                          }), 300), setTimeout((() => {
                            W("onScreen")
                          }), 100)
                        } : () => {
                          const e = `${document.location.pathname}${document.location.search}`,
                            t = `${p}?returnUrl=${encodeURIComponent(e)}&lang=${M}`;
                          window.location.href = t, A({
                            event: "cta_login",
                            event_action: "login",
                            event_category: "cta",
                            event_label: "sign in and claim",
                            element_placement: "interest tracker",
                            link_url: t,
                            text: C.formatMessage(u.engagement_login)
                          })
                        }
                      }), (0, _.jsx)("div", {
                        className: h.legal,
                        children: (0, _.jsx)(j, {})
                      })]
                    })]
                  }), (0, _.jsxs)("div", {
                    className: [h.contentContainer, h[U], h.successSlide].join(" "),
                    "data-type": "long",
                    children: [(0, _.jsxs)("div", {
                      className: h.alert,
                      children: [(0, _.jsx)("div", {
                        className: h.successAlert
                      }), (0, _.jsxs)("div", {
                        className: h.alertText,
                        children: [(0, _.jsx)("h3", {
                          children: (0, _.jsx)(b.Z, {
                            ...u.engagement_success_alert_title
                          })
                        }), (0, _.jsx)("p", {
                          children: (0, _.jsx)(b.Z, {
                            ...u.engagement_success_alert_body
                          })
                        })]
                      })]
                    }), (0, _.jsx)("div", {
                      className: h.swiperContainer,
                      children: (0, _.jsxs)(s.tq, {
                        loop: !1,
                        grabCursor: !0,
                        slidesPerView: "auto",
                        speed: 700,
                        children: [O.map((e => (0, _.jsx)(s.o5, {
                          children: (0, n.createElement)(d.CharacterCard, {
                            characterData: e,
                            key: e.mugshotUrl
                          })
                        }, e.mugshotUrl))), (0, _.jsx)(s.o5, {
                          children: (0, _.jsx)(g.A, {
                            className: [h.linkMore, O.length > 0 ? h.withIcon : ""].join(" "),
                            to: w,
                            onClick: () => {
                              A({
                                event: "cta_link_account",
                                event_action: "link_account",
                                event_category: "cta",
                                event_label: "interest tracker cta",
                                element_placement: "interest tracker",
                                text: C.formatMessage(u.engagement_link_account),
                                link_url: w
                              })
                            },
                            children: (0, _.jsx)("div", {
                              className: h.btnText,
                              children: (0, _.jsx)(b.Z, {
                                ...u.engagement_link_account
                              })
                            })
                          })
                        }, "linkMore")]
                      })
                    }), (0, _.jsx)("div", {
                      className: h.legal,
                      children: (0, _.jsx)(j, {})
                    })]
                  }), (0, _.jsxs)("div", {
                    className: [h.contentContainer, h[V], h.unlinkedSlide, h.textContent].join(" "),
                    children: [(0, _.jsxs)("div", {
                      className: h.textContent,
                      children: [(0, _.jsxs)("div", {
                        className: h.alert,
                        children: [(0, _.jsx)("div", {
                          className: h.errorAlert
                        }), (0, _.jsxs)("div", {
                          className: h.alertText,
                          children: [(0, _.jsx)("h3", {
                            children: (0, _.jsx)(b.Z, {
                              ...u.engagement_error_alert_title
                            })
                          }), (0, _.jsx)("p", {
                            children: (0, _.jsx)(b.Z, {
                              ...u.engagement_error_alert_body,
                              values: {
                                FaqLink: (0, _.jsx)(g.A, {
                                  className: h.faqLink,
                                  to: "https://support.rockstargames.com/articles/20625787714323",
                                  target: "_self",
                                  children: (0, _.jsx)(b.Z, {
                                    ...u.engagement_faqs
                                  })
                                })
                              }
                            })
                          })]
                        })]
                      }), (0, _.jsx)("div", {
                        className: h.platformButtonContainer,
                        children: (0, _.jsx)(g.ExpandingPlatformButton, {
                          buttonText: C.formatMessage(u.engagement_link_console_account),
                          platformsAndLinks: re,
                          trackingType: "link_account",
                          trackingParent: "interest tracker",
                          target: "_self"
                        })
                      })]
                    }), (0, _.jsx)("div", {
                      className: h.legal,
                      children: (0, _.jsx)(j, {})
                    })]
                  }), (0, _.jsxs)("div", {
                    className: [h.contentContainer, h[D], h.errorSlide, h.textContent].join(" "),
                    children: [(0, _.jsxs)("div", {
                      className: h.alert,
                      children: [(0, _.jsx)("div", {
                        className: h.errorAlert
                      }), (0, _.jsx)("div", {
                        className: h.alertText,
                        children: (0, _.jsx)("h3", {
                          children: (0, _.jsx)(b.Z, {
                            ...u.engagement_error_alert_failure
                          })
                        })
                      })]
                    }), (0, _.jsx)(g.Gen9Button, {
                      text: C.formatMessage(u.engagement_cta_ok),
                      onClick: () => window.location.reload()
                    })]
                  })]
                })
              })]
            })
          })
        }
    }
  }
]);